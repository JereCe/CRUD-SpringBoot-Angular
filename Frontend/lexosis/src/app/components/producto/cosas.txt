crearProducto(): Observable<Producto> {
     const imagen = this.productoFrom.get('imagen')?.value;

  if (this.productoFrom) {
    const categoriaId = this.productoFrom.get('categoria')?.value;
    const categoriaIdNumerico = Number(categoriaId);  
    const categoriaSeleccionada = this.categorialist.find(cat => cat.id === categoriaIdNumerico);
    const activo = this.productoFrom.get('activo')?.value;
    const activoBoolean = activo === '1';

    if (categoriaSeleccionada) {
      p.codigo = this.productoFrom.get('codigo')?.value;
      p.nombre = this.productoFrom.get('nombre')?.value;
      p.precioVenta = this.productoFrom.get('precioVenta')?.value;
      p.stock = this.productoFrom.get('stock')?.value;
      p.descripcion = this.productoFrom.get('descripcion')?.value;
      p.activo = activoBoolean;
      p.categoria = categoriaSeleccionada;

      if (this.update) {
        const productoid = this.productoFrom.get('id')?.value;
        p.id = productoid;
      }
    }
  }
  
    return this.upload(imagen).pipe(
      switchMap((url: string) => {
        p.imagen = url; 
  
        // Devolver el producto en un observable
        return of(p);
      })
    );
  }


  crearProducto(){
    let p = new Producto();
    const imagen = this.productoFrom.get('imagen')?.value;
    if (this.productoFrom){
        const categoriaId = this.productoFrom.get('categoria')?.value;
        const categoriaIdNumerico = Number(categoriaId);  
        const categoriaSeleccionada = this.categorialist.find(cat => cat.id === categoriaIdNumerico);
        const activo = this.productoFrom.get('activo')?.value;
        const activoBoolean = activo === '1';
        if (categoriaSeleccionada) {
            p.codigo = this.productoFrom.get('codigo')?.value;
            p.nombre = this.productoFrom.get('nombre')?.value;
            p.precioVenta = this.productoFrom.get('precioVenta')?.value;
            p.stock = this.productoFrom.get('stock')?.value;
            p.descripcion = this.productoFrom.get('descripcion')?.value;
            p.activo = activoBoolean;
            p.categoria = categoriaSeleccionada;
            console.table(p);
        }
        if (this.update){
            const productoid = this.productoFrom.get('id')?.value;
            p.id = productoid;
        }
    }
    return p; 
}